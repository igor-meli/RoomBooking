define(["module"],function(e){"use strict";var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i=typeof location!=="undefined"&&location.href,s=i&&location.protocol&&location.protocol.replace(/\:/,""),o=i&&location.hostname,u=i&&(location.port||undefined),a=[],f=e.config(),l,c;l={version:"2.0.0",strip:function(e){if(e){e=e.replace(n,"");var t=e.match(r);if(t){e=t[1]}}else{e=""}return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var e,n,r;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest}else if(typeof ActiveXObject!=="undefined"){for(n=0;n<3;n++){r=t[n];try{e=new ActiveXObject(r)}catch(i){}if(e){t=[r];break}}}return e},parseName:function(e){var t=false,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);n=i.indexOf("!");if(n!==-1){t=i.substring(n+1,i.length);t=t==="strip";i=i.substring(0,n)}return{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=l.xdRegExp.exec(e),s,o,u;if(!i){return true}s=i[2];o=i[3];o=o.split(":");u=o[1];o=o[0];return(!s||s===t)&&(!o||o===n)&&(!u&&!o||u===r)},finishLoad:function(e,t,n,r){n=t?l.strip(n):n;if(f.isBuild){a[e]=n}r(n)},load:function(e,t,n,r){if(r.isBuild&&!r.inlineText){n();return}f.isBuild=r.isBuild;var a=l.parseName(e),c=a.moduleName+"."+a.ext,h=t.toUrl(c),p=f.useXhr||l.useXhr;if(!i||p(h,s,o,u)){l.get(h,function(t){l.finishLoad(e,a.strip,t,n)},function(e){if(n.error){n.error(e)}})}else{t([c],function(e){l.finishLoad(a.moduleName+"."+a.ext,a.strip,e,n)})}},write:function(e,t,n,r){if(a.hasOwnProperty(t)){var i=l.jsEscape(a[t]);n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,n,r,i){var s=l.parseName(t),o=s.moduleName+"."+s.ext,u=n.toUrl(s.moduleName+"."+s.ext)+".js";l.load(o,n,function(t){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)};l.write(e,o,n,i)},i)}};if(typeof process!=="undefined"&&process.versions&&!!process.versions.node){c=require.nodeRequire("fs");l.get=function(e,t){var n=c.readFileSync(e,"utf8");if(n.indexOf("ï»¿")===0){n=n.substring(1)}t(n)}}else if(l.createXhr()){l.get=function(e,t,n){var r=l.createXhr();r.open("GET",e,true);if(f.onXhr){f.onXhr(r,e)}r.onreadystatechange=function(i){var s,o;if(r.readyState===4){s=r.status;if(s>399&&s<600){o=new Error(e+" HTTP status: "+s);o.xhr=r;n(o)}else{t(r.responseText)}}};r.send(null)}}else if(typeof Packages!=="undefined"){l.get=function(e,t){var n="utf-8",r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),n)),o,u,a="";try{o=new java.lang.StringBuffer;u=s.readLine();if(u&&u.length()&&u.charAt(0)===65279){u=u.substring(1)}o.append(u);while((u=s.readLine())!==null){o.append(i);o.append(u)}a=String(o.toString())}finally{s.close()}t(a)}}return l})